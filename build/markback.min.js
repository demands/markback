/*! markback v0.0.1, (c) Max Edmands (http://maxedmands.com) 2013-05-27 */
(function(){var t,r,n,e,u,o,c,p,s,i,_,a,f,h,l,y,m,d,v,w,g,N,x,b,k={}.hasOwnProperty,C=function(t,r){function n(){this.constructor=t}for(var e in r)k.call(r,e)&&(t[e]=r[e]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};_=function(){function t(){}return t.prototype.convert=function(){var t,r;return this.domNode.hasChildNodes()?(r=function(){var r,n,e,u;for(e=this.domNode.childNodes,u=[],r=0,n=e.length;n>r;r++)t=e[r],u.push(h(t,this).convert());return u}.call(this),r.join("")):""},t.prototype.prefix=function(){var t;return(null!=(t=this.parent)?t.prefix():void 0)||""},t}(),i=function(t){function r(){return l=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return r.__super__.convert.apply(this,arguments)},r}(_),r=function(t){function r(){return y=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){var t;return t=r.__super__.convert.apply(this,arguments).trim(),0===t.length?"":"\n"+this.prefix()+t+"\n\n"},r}(_),t=function(t){function r(){return m=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return"["+r.__super__.convert.apply(this,arguments)+"]("+this.domNode.attributes.href.value+")"},r}(i),n=function(t){function r(){return d=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.prefix=function(){return r.__super__.prefix.apply(this,arguments)+"    "},r}(r),e=function(t){function r(){return v=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return"  \n"},r}(i),u="*",o=function(t){function r(){return w=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return""+u+r.__super__.convert.apply(this,arguments)+u},r}(i),c=function(t){function r(){return g=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return""},r}(_),p=function(t){function r(){return N=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.prefix=function(){return r.__super__.prefix.apply(this,arguments)+"# "},r}(r),a="- - -",s=function(t){function r(){return x=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return"\n"+a+"\n"},r}(r),f=function(t){function r(){return b=r.__super__.constructor.apply(this,arguments)}return C(r,t),r.prototype.convert=function(){return this.domNode.textContent.replace(/\s+/g," ")},r}(i),h=function(u,i){var a,h,l;return h=null!=(l=u.nodeName)?l.toLowerCase():void 0,a=function(){switch(!1){case u.nodeType!==window.Node.TEXT_NODE:return new f;case"head"!==h:return new c;case"div"!==h:return new r;case"p"!==h:return new r;case"hr"!==h:return new s;case"blockquote"!==h:return new n;case!h.match(/^h\d$/):return new p;case"a"!==h:return new t;case"em"!==h:return new o;case"i"!==h:return new o;case"br"!==h:return new e;default:return new _}}(),a.domNode=u,a.parent=i,a},window.Markback=function(t){return null==t&&(t=document.documentElement),h(t).convert()}}).call(this);